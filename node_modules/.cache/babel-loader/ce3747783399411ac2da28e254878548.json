{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DefaultGetter = void 0;\nvar logger_1 = require(\"@ethersproject/logger\");\nvar utils_1 = require(\"ethers/lib/utils\");\nvar logger = new logger_1.Logger(\"defaults\");\nvar baseDefaults = {\n  integer: 0,\n  address: (0, utils_1.hexZeroPad)(\"0x\", 20),\n  bool: false,\n  bytes: \"0x\",\n  string: \"\"\n};\nvar isNullish = function (value) {\n  if (value === undefined) return false;\n  return value !== undefined && value !== null && ([\"string\", \"number\"].includes(typeof value) && BigInt(value) === BigInt(0) || Array.isArray(value) && value.every(isNullish) || typeof value === \"object\" && Object.values(value).every(isNullish) || typeof value === \"boolean\" && value === false);\n};\nfunction getDefaultForBaseType(type) {\n  var _a;\n  // bytesXX\n  var _b = __read((_a = type.match(/^bytes(\\d+)$/)) !== null && _a !== void 0 ? _a : [], 2),\n    width = _b[1];\n  if (width) return (0, utils_1.hexZeroPad)(\"0x\", parseInt(width));\n  if (type.match(/^(u?)int(\\d*)$/)) type = \"integer\";\n  return baseDefaults[type];\n}\nvar DefaultGetter = /** @class */function () {\n  function DefaultGetter(types) {\n    this.types = types;\n    this.defaultValues = {};\n    for (var name_1 in types) {\n      var defaultValue = this.getDefaultValue(name_1);\n      this.defaultValues[name_1] = defaultValue;\n      if (!isNullish(defaultValue)) {\n        logger.throwError(\"Got non-empty value for type \".concat(name_1, \" in default generator: \").concat(defaultValue));\n      }\n    }\n  }\n  DefaultGetter.from = function (types, type) {\n    var defaultValues = new DefaultGetter(types).defaultValues;\n    if (type) return defaultValues[type];\n    return defaultValues;\n  };\n  /* eslint-enable no-dupe-class-members */\n  DefaultGetter.prototype.getDefaultValue = function (type) {\n    var _this = this;\n    if (this.defaultValues[type]) return this.defaultValues[type];\n    // Basic type (address, bool, uint256, etc)\n    var basic = getDefaultForBaseType(type);\n    if (basic !== undefined) return basic;\n    // Array\n    var match = type.match(/^(.*)(\\x5b(\\d*)\\x5d)$/);\n    if (match) {\n      var subtype = match[1];\n      var length_1 = parseInt(match[3]);\n      if (length_1 > 0) {\n        var baseValue = this.getDefaultValue(subtype);\n        return Array(length_1).fill(baseValue);\n      }\n      return [];\n    }\n    // Struct\n    var fields = this.types[type];\n    if (fields) {\n      return fields.reduce(function (obj, _a) {\n        var _b;\n        var name = _a.name,\n          type = _a.type;\n        return __assign(__assign({}, obj), (_b = {}, _b[name] = _this.getDefaultValue(type), _b));\n      }, {});\n    }\n    return logger.throwArgumentError(\"unknown type: \".concat(type), \"type\", type);\n  };\n  return DefaultGetter;\n}();\nexports.DefaultGetter = DefaultGetter;","map":{"version":3,"sources":["../../../src/utils/eip712/defaults.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAA,QAAA,GAAA,OAAA,CAAA,uBAAA,CAAA;AACA,IAAA,OAAA,GAAA,OAAA,CAAA,kBAAA,CAAA;AAIA,IAAM,MAAM,GAAG,IAAI,QAAA,CAAA,MAAM,CAAC,UAAU,CAAC;AAErC,IAAM,YAAY,GAAwB;EACxC,OAAO,EAAE,CAAC;EACV,OAAO,EAAE,CAAA,CAAA,EAAA,OAAA,CAAA,UAAU,EAAC,IAAI,EAAE,EAAE,CAAC;EAC7B,IAAI,EAAE,KAAK;EACX,KAAK,EAAE,IAAI;EACX,MAAM,EAAE;CACT;AAED,IAAM,SAAS,GAAG,UAAC,KAAU,EAAA;EAC3B,IAAI,KAAK,KAAK,SAAS,EAAE,OAAO,KAAK;EAErC,OACE,KAAK,KAAK,SAAS,IACnB,KAAK,KAAK,IAAI,KACZ,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC,QAAQ,CAAC,OAAO,KAAK,CAAC,IAC3C,MAAM,CAAC,KAAK,CAAC,KAAK,MAAM,CAAC,CAAC,CAAC,IAC1B,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,KAAK,CAAC,KAAK,CAAC,SAAS,CAAE,IAC/C,OAAO,KAAK,KAAK,QAAQ,IAAI,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,SAAS,CAAE,IACnE,OAAO,KAAK,KAAK,SAAS,IAAI,KAAK,KAAK,KAAM,CAAC;AAEtD,CAAC;AAED,SAAS,qBAAqB,CAAC,IAAY,EAAA;;EACzC;EACM,IAAA,EAAA,GAAA,MAAA,CAAY,CAAA,EAAA,GAAA,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAI,EAAE,EAAA,CAAA,CAAA;IAAzC,KAAK,GAAA,EAAA,CAAA,CAAA,CAAoC;EAClD,IAAI,KAAK,EAAE,OAAO,CAAA,CAAA,EAAA,OAAA,CAAA,UAAU,EAAC,IAAI,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC;EAEnD,IAAI,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,EAAE,IAAI,GAAG,SAAS;EAElD,OAAO,YAAY,CAAC,IAAI,CAAC;AAC3B;AAQA,IAAA,aAAA,GAAA,aAAA,YAAA;EAGE,SAAA,aAAA,CAAsB,KAAY,EAAA;IAAZ,IAAA,CAAA,KAAK,GAAL,KAAK;IAF3B,IAAA,CAAA,aAAa,GAAsB,CAAA,CAAuB;IAGxD,KAAK,IAAM,MAAI,IAAI,KAAK,EAAE;MACxB,IAAM,YAAY,GAAG,IAAI,CAAC,eAAe,CAAC,MAAI,CAAC;MAC/C,IAAI,CAAC,aAAa,CAAC,MAAI,CAAC,GAAG,YAAY;MACvC,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,EAAE;QAC5B,MAAM,CAAC,UAAU,CACf,+BAAA,CAAA,MAAA,CAAgC,MAAI,EAAA,yBAAA,CAAA,CAAA,MAAA,CAA0B,YAAY,CAAE,CAC7E;MACF;IACF;EACH;EAYO,aAAA,CAAA,IAAI,GAAX,UACE,KAAY,EACZ,IAAkB,EAAA;IAEV,IAAA,aAAa,GAAK,IAAI,aAAa,CAAC,KAAK,CAAC,CAAA,aAA7B;IACrB,IAAI,IAAI,EAAE,OAAO,aAAa,CAAC,IAAI,CAAC;IACpC,OAAO,aAAa;EACtB,CAAC;EACD;EAEA,aAAA,CAAA,SAAA,CAAA,eAAe,GAAf,UAAgB,IAAY,EAAA;IAA5B,IAAA,KAAA,GAAA,IAAA;IACE,IAAI,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,OAAO,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC;IAC7D;IACA,IAAM,KAAK,GAAG,qBAAqB,CAAC,IAAI,CAAC;IACzC,IAAI,KAAK,KAAK,SAAS,EAAE,OAAO,KAAK;IAErC;IACA,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,uBAAuB,CAAC;IACjD,IAAI,KAAK,EAAE;MACT,IAAM,OAAO,GAAG,KAAK,CAAC,CAAC,CAAC;MACxB,IAAM,QAAM,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;MACjC,IAAI,QAAM,GAAG,CAAC,EAAE;QACd,IAAM,SAAS,GAAG,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC;QAC/C,OAAO,KAAK,CAAC,QAAM,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC;MACrC;MACD,OAAO,EAAE;IACV;IAED;IACA,IAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;IAC/B,IAAI,MAAM,EAAE;MACV,OAAO,MAAM,CAAC,MAAM,CAClB,UAAC,GAAG,EAAE,EAAc,EAAA;;YAAZ,IAAI,GAAA,EAAA,CAAA,IAAA;UAAE,IAAI,GAAA,EAAA,CAAA,IAAA;QAAO,OAAA,QAAA,CAAA,QAAA,CAAA,CAAA,CAAA,EACpB,GAAG,CAAA,GAAA,EAAA,GAAA,CAAA,CAAA,EAAA,EAAA,CACL,IAAI,CAAA,GAAG,KAAI,CAAC,eAAe,CAAC,IAAI,CAAC,EAAA,EAAA,EAAA;MAFX,CAGvB,EACF,CAAA,CAAE,CACH;IACF;IAED,OAAO,MAAM,CAAC,kBAAkB,CAAC,gBAAA,CAAA,MAAA,CAAiB,IAAI,CAAE,EAAE,MAAM,EAAE,IAAI,CAAC;EACzE,CAAC;EACH,OAAA,aAAC;AAAD,CAAC,EAAA;AAnEY,OAAA,CAAA,aAAA,GAAA,aAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DefaultGetter = void 0;\nvar logger_1 = require(\"@ethersproject/logger\");\nvar utils_1 = require(\"ethers/lib/utils\");\nvar logger = new logger_1.Logger(\"defaults\");\nvar baseDefaults = {\n    integer: 0,\n    address: (0, utils_1.hexZeroPad)(\"0x\", 20),\n    bool: false,\n    bytes: \"0x\",\n    string: \"\",\n};\nvar isNullish = function (value) {\n    if (value === undefined)\n        return false;\n    return (value !== undefined &&\n        value !== null &&\n        (([\"string\", \"number\"].includes(typeof value) &&\n            BigInt(value) === BigInt(0)) ||\n            (Array.isArray(value) && value.every(isNullish)) ||\n            (typeof value === \"object\" && Object.values(value).every(isNullish)) ||\n            (typeof value === \"boolean\" && value === false)));\n};\nfunction getDefaultForBaseType(type) {\n    var _a;\n    // bytesXX\n    var _b = __read((_a = type.match(/^bytes(\\d+)$/)) !== null && _a !== void 0 ? _a : [], 2), width = _b[1];\n    if (width)\n        return (0, utils_1.hexZeroPad)(\"0x\", parseInt(width));\n    if (type.match(/^(u?)int(\\d*)$/))\n        type = \"integer\";\n    return baseDefaults[type];\n}\nvar DefaultGetter = /** @class */ (function () {\n    function DefaultGetter(types) {\n        this.types = types;\n        this.defaultValues = {};\n        for (var name_1 in types) {\n            var defaultValue = this.getDefaultValue(name_1);\n            this.defaultValues[name_1] = defaultValue;\n            if (!isNullish(defaultValue)) {\n                logger.throwError(\"Got non-empty value for type \".concat(name_1, \" in default generator: \").concat(defaultValue));\n            }\n        }\n    }\n    DefaultGetter.from = function (types, type) {\n        var defaultValues = new DefaultGetter(types).defaultValues;\n        if (type)\n            return defaultValues[type];\n        return defaultValues;\n    };\n    /* eslint-enable no-dupe-class-members */\n    DefaultGetter.prototype.getDefaultValue = function (type) {\n        var _this = this;\n        if (this.defaultValues[type])\n            return this.defaultValues[type];\n        // Basic type (address, bool, uint256, etc)\n        var basic = getDefaultForBaseType(type);\n        if (basic !== undefined)\n            return basic;\n        // Array\n        var match = type.match(/^(.*)(\\x5b(\\d*)\\x5d)$/);\n        if (match) {\n            var subtype = match[1];\n            var length_1 = parseInt(match[3]);\n            if (length_1 > 0) {\n                var baseValue = this.getDefaultValue(subtype);\n                return Array(length_1).fill(baseValue);\n            }\n            return [];\n        }\n        // Struct\n        var fields = this.types[type];\n        if (fields) {\n            return fields.reduce(function (obj, _a) {\n                var _b;\n                var name = _a.name, type = _a.type;\n                return (__assign(__assign({}, obj), (_b = {}, _b[name] = _this.getDefaultValue(type), _b)));\n            }, {});\n        }\n        return logger.throwArgumentError(\"unknown type: \".concat(type), \"type\", type);\n    };\n    return DefaultGetter;\n}());\nexports.DefaultGetter = DefaultGetter;\n//# sourceMappingURL=defaults.js.map"]},"metadata":{},"sourceType":"script"}