{"ast":null,"code":"import _styled from \"styled-components\";\nvar _jsxFileName = \"/home/diep/freelance/interface/src/nft/components/profile/list/ListingButton.tsx\",\n  _s = $RefreshSig$();\nimport { Trans } from \"@lingui/react\";\nimport { i18n } from \"@lingui/core\";\nimport { BaseButton } from 'components/Button';\nimport { BelowFloorWarningModal } from 'nft/components/profile/list/Modal/BelowFloorWarningModal';\nimport { useIsMobile, useSellAsset } from 'nft/hooks';\nimport { useMemo, useState } from 'react';\nimport { BREAKPOINTS } from 'theme';\nimport { shallow } from 'zustand/shallow';\nimport { findListingIssues } from './utils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst StyledListingButton = _styled(BaseButton).withConfig({\n  displayName: \"ListingButton__StyledListingButton\",\n  componentId: \"sc-1jczxwl-0\"\n})([\"background:\", \";color:\", \";font-weight:600;font-size:20px;line-height:24px;padding:16px;border-radius:12px;width:min-content;border:none;cursor:\", \";opacity:\", \";@media screen and (max-width:\", \"px){font-size:16px;line-height:20px;padding:10px 12px;}\"], _ref => {\n  let {\n    showResolveIssues,\n    theme\n  } = _ref;\n  return showResolveIssues ? theme.accentFailure : theme.accentAction;\n}, _ref2 => {\n  let {\n    theme\n  } = _ref2;\n  return theme.accentTextLightPrimary;\n}, _ref3 => {\n  let {\n    missingPrices\n  } = _ref3;\n  return missingPrices ? 'auto' : 'pointer';\n}, _ref4 => {\n  let {\n    showResolveIssues,\n    missingPrices\n  } = _ref4;\n  return !showResolveIssues && missingPrices && '0.3';\n}, BREAKPOINTS.sm);\nexport const ListingButton = _ref5 => {\n  _s();\n  let {\n    onClick\n  } = _ref5;\n  const {\n    sellAssets,\n    showResolveIssues,\n    toggleShowResolveIssues,\n    issues,\n    setIssues\n  } = useSellAsset(_ref6 => {\n    let {\n      sellAssets,\n      showResolveIssues,\n      toggleShowResolveIssues,\n      issues,\n      setIssues\n    } = _ref6;\n    return {\n      sellAssets,\n      showResolveIssues,\n      toggleShowResolveIssues,\n      issues,\n      setIssues\n    };\n  }, shallow);\n  const [showWarning, setShowWarning] = useState(false);\n  const isMobile = useIsMobile();\n\n  // Find issues with item listing data\n  const [listingsMissingPrice, listingsBelowFloor] = useMemo(() => {\n    const {\n      missingExpiration,\n      overMaxExpiration,\n      listingsMissingPrice,\n      listingsBelowFloor,\n      listingsAboveSellOrderFloor\n    } = findListingIssues(sellAssets);\n\n    // set number of issues\n    const foundIssues = Number(missingExpiration) + Number(overMaxExpiration) + listingsMissingPrice.length + listingsAboveSellOrderFloor.length;\n    setIssues(foundIssues);\n    !foundIssues && showResolveIssues && toggleShowResolveIssues();\n    // Only show Resolve Issue text if there was a user submitted error (ie not when page loads with no prices set)\n    if ((missingExpiration || overMaxExpiration || listingsAboveSellOrderFloor.length) && !showResolveIssues) toggleShowResolveIssues();\n    return [listingsMissingPrice, listingsBelowFloor];\n  }, [sellAssets, setIssues, showResolveIssues, toggleShowResolveIssues]);\n  const warningWrappedClick = () => {\n    if (issues) !showResolveIssues && toggleShowResolveIssues();else if (listingsBelowFloor.length) setShowWarning(true);else onClick();\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(StyledListingButton, {\n      onClick: warningWrappedClick,\n      missingPrices: !!listingsMissingPrice.length,\n      showResolveIssues: showResolveIssues,\n      children: showResolveIssues ? /*#__PURE__*/_jsxDEV(Trans, {\n        id: \"{0, plural, =1 {Resolve issue} other {{1}}}\",\n        values: {\n          0: issues !== 1 ? 2 : 1,\n          1: /*i18n*/i18n._(\"Resolve {issues} issues\", {\n            issues: issues\n          })\n        }\n      }, void 0, false, void 0, this) : listingsMissingPrice.length && !isMobile ? /*#__PURE__*/_jsxDEV(Trans, {\n        id: \"Set prices to continue\"\n      }, void 0, false, void 0, this) : /*#__PURE__*/_jsxDEV(Trans, {\n        id: \"Start listing\"\n      }, void 0, false, void 0, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), showWarning && /*#__PURE__*/_jsxDEV(BelowFloorWarningModal, {\n      listingsBelowFloor: listingsBelowFloor,\n      closeModal: () => setShowWarning(false),\n      startListing: onClick\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n_s(ListingButton, \"bHe7VjsOiTQZKYIxE1alZKMT0hw=\", false, function () {\n  return [useSellAsset, useIsMobile];\n});\n_c = ListingButton;\nvar _c;\n$RefreshReg$(_c, \"ListingButton\");","map":{"version":3,"names":["BaseButton","BelowFloorWarningModal","useIsMobile","useSellAsset","useMemo","useState","BREAKPOINTS","shallow","findListingIssues","StyledListingButton","styled","showResolveIssues","theme","accentFailure","accentAction","accentTextLightPrimary","missingPrices","sm","ListingButton","onClick","sellAssets","toggleShowResolveIssues","issues","setIssues","showWarning","setShowWarning","isMobile","listingsMissingPrice","listingsBelowFloor","missingExpiration","overMaxExpiration","listingsAboveSellOrderFloor","foundIssues","Number","length","warningWrappedClick"],"sources":["/home/diep/freelance/interface/src/nft/components/profile/list/ListingButton.tsx"],"sourcesContent":["import { Plural, t, Trans } from '@lingui/macro'\nimport { BaseButton } from 'components/Button'\nimport { BelowFloorWarningModal } from 'nft/components/profile/list/Modal/BelowFloorWarningModal'\nimport { useIsMobile, useSellAsset } from 'nft/hooks'\nimport { useMemo, useState } from 'react'\nimport styled from 'styled-components/macro'\nimport { BREAKPOINTS } from 'theme'\nimport { shallow } from 'zustand/shallow'\n\nimport { findListingIssues } from './utils'\n\nconst StyledListingButton = styled(BaseButton)<{ showResolveIssues: boolean; missingPrices: boolean }>`\n  background: ${({ showResolveIssues, theme }) => (showResolveIssues ? theme.accentFailure : theme.accentAction)};\n  color: ${({ theme }) => theme.accentTextLightPrimary};\n  font-weight: 600;\n  font-size: 20px;\n  line-height: 24px;\n  padding: 16px;\n  border-radius: 12px;\n  width: min-content;\n  border: none;\n  cursor: ${({ missingPrices }) => (missingPrices ? 'auto' : 'pointer')};\n  opacity: ${({ showResolveIssues, missingPrices }) => !showResolveIssues && missingPrices && '0.3'};\n\n  @media screen and (max-width: ${BREAKPOINTS.sm}px) {\n    font-size: 16px;\n    line-height: 20px;\n    padding: 10px 12px;\n  }\n`\n\nexport const ListingButton = ({ onClick }: { onClick: () => void }) => {\n  const { sellAssets, showResolveIssues, toggleShowResolveIssues, issues, setIssues } = useSellAsset(\n    ({ sellAssets, showResolveIssues, toggleShowResolveIssues, issues, setIssues }) => ({\n      sellAssets,\n      showResolveIssues,\n      toggleShowResolveIssues,\n      issues,\n      setIssues,\n    }),\n    shallow\n  )\n  const [showWarning, setShowWarning] = useState(false)\n  const isMobile = useIsMobile()\n\n  // Find issues with item listing data\n  const [listingsMissingPrice, listingsBelowFloor] = useMemo(() => {\n    const {\n      missingExpiration,\n      overMaxExpiration,\n      listingsMissingPrice,\n      listingsBelowFloor,\n      listingsAboveSellOrderFloor,\n    } = findListingIssues(sellAssets)\n\n    // set number of issues\n    const foundIssues =\n      Number(missingExpiration) +\n      Number(overMaxExpiration) +\n      listingsMissingPrice.length +\n      listingsAboveSellOrderFloor.length\n    setIssues(foundIssues)\n    !foundIssues && showResolveIssues && toggleShowResolveIssues()\n    // Only show Resolve Issue text if there was a user submitted error (ie not when page loads with no prices set)\n    if ((missingExpiration || overMaxExpiration || listingsAboveSellOrderFloor.length) && !showResolveIssues)\n      toggleShowResolveIssues()\n\n    return [listingsMissingPrice, listingsBelowFloor]\n  }, [sellAssets, setIssues, showResolveIssues, toggleShowResolveIssues])\n\n  const warningWrappedClick = () => {\n    if (issues) !showResolveIssues && toggleShowResolveIssues()\n    else if (listingsBelowFloor.length) setShowWarning(true)\n    else onClick()\n  }\n\n  return (\n    <>\n      <StyledListingButton\n        onClick={warningWrappedClick}\n        missingPrices={!!listingsMissingPrice.length}\n        showResolveIssues={showResolveIssues}\n      >\n        {showResolveIssues ? (\n          <Plural value={issues !== 1 ? 2 : 1} _1=\"Resolve issue\" other={t`Resolve ${issues} issues`} />\n        ) : listingsMissingPrice.length && !isMobile ? (\n          <Trans>Set prices to continue</Trans>\n        ) : (\n          <Trans>Start listing</Trans>\n        )}\n      </StyledListingButton>\n\n      {showWarning && (\n        <BelowFloorWarningModal\n          listingsBelowFloor={listingsBelowFloor}\n          closeModal={() => setShowWarning(false)}\n          startListing={onClick}\n        />\n      )}\n    </>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}