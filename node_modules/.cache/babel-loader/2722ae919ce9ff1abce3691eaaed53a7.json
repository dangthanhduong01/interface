{"ast":null,"code":"var _jsxFileName = \"/home/diep/freelance/interface/src/components/SearchModal/CurrencySearchModal.tsx\",\n  _s = $RefreshSig$();\nimport TokenSafety from 'components/TokenSafety';\nimport { memo, useCallback, useEffect, useState } from 'react';\nimport { useUserAddedTokens } from 'state/user/hooks';\nimport useLast from '../../hooks/useLast';\nimport { useWindowSize } from '../../hooks/useWindowSize';\nimport Modal from '../Modal';\nimport { CurrencySearch } from './CurrencySearch';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar CurrencyModalView;\n(function (CurrencyModalView) {\n  CurrencyModalView[CurrencyModalView[\"search\"] = 0] = \"search\";\n  CurrencyModalView[CurrencyModalView[\"importToken\"] = 1] = \"importToken\";\n  CurrencyModalView[CurrencyModalView[\"tokenSafety\"] = 2] = \"tokenSafety\";\n})(CurrencyModalView || (CurrencyModalView = {}));\nexport default _c2 = /*#__PURE__*/memo(_c = _s(function CurrencySearchModal(_ref) {\n  _s();\n  let {\n    isOpen,\n    onDismiss,\n    onCurrencySelect,\n    selectedCurrency,\n    otherSelectedCurrency,\n    showCommonBases = false,\n    showCurrencyAmount = true,\n    disableNonToken = false,\n    onlyShowCurrenciesWithBalance = false\n  } = _ref;\n  const [modalView, setModalView] = useState(CurrencyModalView.search);\n  const lastOpen = useLast(isOpen);\n  const userAddedTokens = useUserAddedTokens();\n  useEffect(() => {\n    if (isOpen && !lastOpen) {\n      setModalView(CurrencyModalView.search);\n    }\n  }, [isOpen, lastOpen]);\n  const showTokenSafetySpeedbump = token => {\n    setWarningToken(token);\n    setModalView(CurrencyModalView.tokenSafety);\n  };\n  const handleCurrencySelect = useCallback((currency, hasWarning) => {\n    if (hasWarning && currency.isToken && !userAddedTokens.find(token => token.equals(currency))) {\n      showTokenSafetySpeedbump(currency);\n    } else {\n      onCurrencySelect(currency);\n      onDismiss();\n    }\n  }, [onDismiss, onCurrencySelect, userAddedTokens]);\n  // used for token safety\n  const [warningToken, setWarningToken] = useState();\n  const {\n    height: windowHeight\n  } = useWindowSize();\n  // change min height if not searching\n  let modalHeight = 80;\n  let content = null;\n  switch (modalView) {\n    case CurrencyModalView.search:\n      if (windowHeight) {\n        // Converts pixel units to vh for Modal component\n        modalHeight = Math.min(Math.round(680 / windowHeight * 100), 80);\n      }\n      content = /*#__PURE__*/_jsxDEV(CurrencySearch, {\n        isOpen: isOpen,\n        onDismiss: onDismiss,\n        onCurrencySelect: handleCurrencySelect,\n        selectedCurrency: selectedCurrency,\n        otherSelectedCurrency: otherSelectedCurrency,\n        showCommonBases: showCommonBases,\n        showCurrencyAmount: showCurrencyAmount,\n        disableNonToken: disableNonToken,\n        onlyShowCurrenciesWithBalance: onlyShowCurrenciesWithBalance\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this);\n      break;\n    case CurrencyModalView.tokenSafety:\n      modalHeight = undefined;\n      if (warningToken) {\n        content = /*#__PURE__*/_jsxDEV(TokenSafety, {\n          tokenAddress: warningToken.address,\n          onContinue: () => handleCurrencySelect(warningToken),\n          onCancel: () => setModalView(CurrencyModalView.search),\n          showCancel: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this);\n      }\n      break;\n  }\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    isOpen: isOpen,\n    onDismiss: onDismiss,\n    maxHeight: modalHeight,\n    minHeight: modalHeight,\n    children: content\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 5\n  }, this);\n}, \"m+hyl4UxCFyGiz+22zoflHE1hXc=\", false, function () {\n  return [useLast, useUserAddedTokens, useWindowSize];\n}));\nvar _c, _c2;\n$RefreshReg$(_c, \"%default%$memo\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["TokenSafety","memo","useCallback","useEffect","useState","useUserAddedTokens","useLast","useWindowSize","Modal","CurrencySearch","CurrencyModalView","CurrencySearchModal","isOpen","onDismiss","onCurrencySelect","selectedCurrency","otherSelectedCurrency","showCommonBases","showCurrencyAmount","disableNonToken","onlyShowCurrenciesWithBalance","modalView","setModalView","search","lastOpen","userAddedTokens","showTokenSafetySpeedbump","token","setWarningToken","tokenSafety","handleCurrencySelect","currency","hasWarning","isToken","find","equals","warningToken","height","windowHeight","modalHeight","content","Math","min","round","undefined","address"],"sources":["/home/diep/freelance/interface/src/components/SearchModal/CurrencySearchModal.tsx"],"sourcesContent":["import { Currency, Token } from '@uniswap/sdk-core'\nimport TokenSafety from 'components/TokenSafety'\nimport { memo, useCallback, useEffect, useState } from 'react'\nimport { useUserAddedTokens } from 'state/user/hooks'\n\nimport useLast from '../../hooks/useLast'\nimport { useWindowSize } from '../../hooks/useWindowSize'\nimport Modal from '../Modal'\nimport { CurrencySearch } from './CurrencySearch'\n\ninterface CurrencySearchModalProps {\n  isOpen: boolean\n  onDismiss: () => void\n  selectedCurrency?: Currency | null\n  onCurrencySelect: (currency: Currency) => void\n  otherSelectedCurrency?: Currency | null\n  showCommonBases?: boolean\n  showCurrencyAmount?: boolean\n  disableNonToken?: boolean\n  onlyShowCurrenciesWithBalance?: boolean\n}\n\nenum CurrencyModalView {\n  search,\n  importToken,\n  tokenSafety,\n}\n\nexport default memo(function CurrencySearchModal({\n  isOpen,\n  onDismiss,\n  onCurrencySelect,\n  selectedCurrency,\n  otherSelectedCurrency,\n  showCommonBases = false,\n  showCurrencyAmount = true,\n  disableNonToken = false,\n  onlyShowCurrenciesWithBalance = false,\n}: CurrencySearchModalProps) {\n  const [modalView, setModalView] = useState<CurrencyModalView>(CurrencyModalView.search)\n  const lastOpen = useLast(isOpen)\n  const userAddedTokens = useUserAddedTokens()\n\n  useEffect(() => {\n    if (isOpen && !lastOpen) {\n      setModalView(CurrencyModalView.search)\n    }\n  }, [isOpen, lastOpen])\n\n  const showTokenSafetySpeedbump = (token: Token) => {\n    setWarningToken(token)\n    setModalView(CurrencyModalView.tokenSafety)\n  }\n\n  const handleCurrencySelect = useCallback(\n    (currency: Currency, hasWarning?: boolean) => {\n      if (hasWarning && currency.isToken && !userAddedTokens.find((token) => token.equals(currency))) {\n        showTokenSafetySpeedbump(currency)\n      } else {\n        onCurrencySelect(currency)\n        onDismiss()\n      }\n    },\n    [onDismiss, onCurrencySelect, userAddedTokens]\n  )\n  // used for token safety\n  const [warningToken, setWarningToken] = useState<Token | undefined>()\n\n  const { height: windowHeight } = useWindowSize()\n  // change min height if not searching\n  let modalHeight: number | undefined = 80\n  let content = null\n  switch (modalView) {\n    case CurrencyModalView.search:\n      if (windowHeight) {\n        // Converts pixel units to vh for Modal component\n        modalHeight = Math.min(Math.round((680 / windowHeight) * 100), 80)\n      }\n      content = (\n        <CurrencySearch\n          isOpen={isOpen}\n          onDismiss={onDismiss}\n          onCurrencySelect={handleCurrencySelect}\n          selectedCurrency={selectedCurrency}\n          otherSelectedCurrency={otherSelectedCurrency}\n          showCommonBases={showCommonBases}\n          showCurrencyAmount={showCurrencyAmount}\n          disableNonToken={disableNonToken}\n          onlyShowCurrenciesWithBalance={onlyShowCurrenciesWithBalance}\n        />\n      )\n      break\n    case CurrencyModalView.tokenSafety:\n      modalHeight = undefined\n      if (warningToken) {\n        content = (\n          <TokenSafety\n            tokenAddress={warningToken.address}\n            onContinue={() => handleCurrencySelect(warningToken)}\n            onCancel={() => setModalView(CurrencyModalView.search)}\n            showCancel={true}\n          />\n        )\n      }\n      break\n  }\n  return (\n    <Modal isOpen={isOpen} onDismiss={onDismiss} maxHeight={modalHeight} minHeight={modalHeight}>\n      {content}\n    </Modal>\n  )\n})\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}