{"ast":null,"code":"import { Protocol } from '@uniswap/router-sdk';\nimport { Percent } from '@uniswap/sdk-core';\nimport { Pair } from '@uniswap/v2-sdk';\nimport { Pool } from '@uniswap/v3-sdk';\nimport _ from 'lodash';\nimport { V3_CORE_FACTORY_ADDRESSES } from './addresses';\nimport { CurrencyAmount } from '.';\nexport const routeToString = route => {\n  const routeStr = [];\n  const tokens = route.protocol === Protocol.V3 ? route.tokenPath :\n  // MixedRoute and V2Route have path\n  route.path;\n  const tokenPath = _.map(tokens, token => `${token.symbol}`);\n  const pools = route.protocol === Protocol.V3 || route.protocol === Protocol.MIXED ? route.pools : route.pairs;\n  const poolFeePath = _.map(pools, pool => {\n    return `${pool instanceof Pool ? ` -- ${pool.fee / 10000}% [${Pool.getAddress(pool.token0, pool.token1, pool.fee, undefined, V3_CORE_FACTORY_ADDRESSES[pool.chainId])}]` : ` -- [${Pair.getAddress(pool.token0, pool.token1)}]`} --> `;\n  });\n  for (let i = 0; i < tokenPath.length; i++) {\n    routeStr.push(tokenPath[i]);\n    if (i < poolFeePath.length) {\n      routeStr.push(poolFeePath[i]);\n    }\n  }\n  return routeStr.join('');\n};\nexport const routeAmountsToString = routeAmounts => {\n  const total = _.reduce(routeAmounts, (total, cur) => {\n    return total.add(cur.amount);\n  }, CurrencyAmount.fromRawAmount(routeAmounts[0].amount.currency, 0));\n  const routeStrings = _.map(routeAmounts, _ref => {\n    let {\n      protocol,\n      route,\n      amount\n    } = _ref;\n    const portion = amount.divide(total);\n    const percent = new Percent(portion.numerator, portion.denominator);\n    /// @dev special case for MIXED routes we want to show user friendly V2+V3 instead\n    return `[${protocol == Protocol.MIXED ? 'V2 + V3' : protocol}] ${percent.toFixed(2)}% = ${routeToString(route)}`;\n  });\n  return _.join(routeStrings, ', ');\n};\nexport const routeAmountToString = routeAmount => {\n  const {\n    route,\n    amount\n  } = routeAmount;\n  return `${amount.toExact()} = ${routeToString(route)}`;\n};\nexport const poolToString = p => {\n  return `${p.token0.symbol}/${p.token1.symbol}${p instanceof Pool ? `/${p.fee / 10000}%` : ``}`;\n};","map":{"version":3,"sources":["../../../src/util/routes.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { Protocol } from '@uniswap/router-sdk';\nimport { Percent } from '@uniswap/sdk-core';\nimport { Pair } from '@uniswap/v2-sdk';\nimport { Pool } from '@uniswap/v3-sdk';\nimport _ from 'lodash';\nimport { V3_CORE_FACTORY_ADDRESSES } from './addresses';\nimport { CurrencyAmount } from '.';\nexport const routeToString = (route) => {\n    const routeStr = [];\n    const tokens = route.protocol === Protocol.V3\n        ? route.tokenPath\n        : // MixedRoute and V2Route have path\n            route.path;\n    const tokenPath = _.map(tokens, (token) => `${token.symbol}`);\n    const pools = route.protocol === Protocol.V3 || route.protocol === Protocol.MIXED\n        ? route.pools\n        : route.pairs;\n    const poolFeePath = _.map(pools, (pool) => {\n        return `${pool instanceof Pool\n            ? ` -- ${pool.fee / 10000}% [${Pool.getAddress(pool.token0, pool.token1, pool.fee, undefined, V3_CORE_FACTORY_ADDRESSES[pool.chainId])}]`\n            : ` -- [${Pair.getAddress(pool.token0, pool.token1)}]`} --> `;\n    });\n    for (let i = 0; i < tokenPath.length; i++) {\n        routeStr.push(tokenPath[i]);\n        if (i < poolFeePath.length) {\n            routeStr.push(poolFeePath[i]);\n        }\n    }\n    return routeStr.join('');\n};\nexport const routeAmountsToString = (routeAmounts) => {\n    const total = _.reduce(routeAmounts, (total, cur) => {\n        return total.add(cur.amount);\n    }, CurrencyAmount.fromRawAmount(routeAmounts[0].amount.currency, 0));\n    const routeStrings = _.map(routeAmounts, ({ protocol, route, amount }) => {\n        const portion = amount.divide(total);\n        const percent = new Percent(portion.numerator, portion.denominator);\n        /// @dev special case for MIXED routes we want to show user friendly V2+V3 instead\n        return `[${protocol == Protocol.MIXED ? 'V2 + V3' : protocol}] ${percent.toFixed(2)}% = ${routeToString(route)}`;\n    });\n    return _.join(routeStrings, ', ');\n};\nexport const routeAmountToString = (routeAmount) => {\n    const { route, amount } = routeAmount;\n    return `${amount.toExact()} = ${routeToString(route)}`;\n};\nexport const poolToString = (p) => {\n    return `${p.token0.symbol}/${p.token1.symbol}${p instanceof Pool ? `/${p.fee / 10000}%` : ``}`;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm91dGVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3V0aWwvcm91dGVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUMvQyxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDNUMsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ3ZDLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUN2QyxPQUFPLENBQUMsTUFBTSxRQUFRLENBQUM7QUFJdkIsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sYUFBYSxDQUFDO0FBRXhELE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxHQUFHLENBQUM7QUFFbkMsTUFBTSxDQUFDLE1BQU0sYUFBYSxHQUFHLENBQzNCLEtBQXFDLEVBQzdCLEVBQUU7SUFDVixNQUFNLFFBQVEsR0FBRyxFQUFFLENBQUM7SUFDcEIsTUFBTSxNQUFNLEdBQ1YsS0FBSyxDQUFDLFFBQVEsS0FBSyxRQUFRLENBQUMsRUFBRTtRQUM1QixDQUFDLENBQUMsS0FBSyxDQUFDLFNBQVM7UUFDakIsQ0FBQyxDQUFDLG1DQUFtQztZQUNuQyxLQUFLLENBQUMsSUFBSSxDQUFDO0lBQ2pCLE1BQU0sU0FBUyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDO0lBQzlELE1BQU0sS0FBSyxHQUNULEtBQUssQ0FBQyxRQUFRLEtBQUssUUFBUSxDQUFDLEVBQUUsSUFBSSxLQUFLLENBQUMsUUFBUSxLQUFLLFFBQVEsQ0FBQyxLQUFLO1FBQ2pFLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSztRQUNiLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDO0lBQ2xCLE1B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"]},"metadata":{},"sourceType":"module"}