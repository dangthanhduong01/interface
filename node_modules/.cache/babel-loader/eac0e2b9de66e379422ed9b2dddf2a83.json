{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useWeb3React } from '@web3-react/core';\nimport { useCallback } from 'react';\nimport shallow from 'zustand/shallow';\nimport { useBag } from './useBag';\nimport { useSendTransaction } from './useSendTransaction';\nimport { useTransactionResponse } from './useTransactionResponse';\nexport function usePurchaseAssets() {\n  _s();\n  const {\n    provider\n  } = useWeb3React();\n  const sendTransaction = useSendTransaction(state => state.sendTransaction);\n  const setTransactionResponse = useTransactionResponse(state => state.setTransactionResponse);\n  const {\n    setLocked: setBagLocked,\n    setBagExpanded,\n    reset: resetBag\n  } = useBag(_ref => {\n    let {\n      setLocked,\n      setBagExpanded,\n      reset\n    } = _ref;\n    return {\n      setLocked,\n      setBagExpanded,\n      reset\n    };\n  }, shallow);\n  return useCallback(async function (routingData, assetsToBuy) {\n    let purchasingWithErc20 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    if (!provider) return;\n    const purchaseResponse = await sendTransaction(provider.getSigner(), assetsToBuy, routingData, purchasingWithErc20);\n    if (purchaseResponse) {\n      setBagLocked(false);\n      setTransactionResponse(purchaseResponse);\n      setBagExpanded({\n        bagExpanded: false\n      });\n      resetBag();\n    }\n  }, [provider, resetBag, sendTransaction, setBagExpanded, setBagLocked, setTransactionResponse]);\n}\n_s(usePurchaseAssets, \"PEEtTruG3l8Ke2kutTVKz0Z8LJs=\", false, function () {\n  return [useWeb3React, useSendTransaction, useTransactionResponse, useBag];\n});","map":{"version":3,"names":["useWeb3React","useCallback","shallow","useBag","useSendTransaction","useTransactionResponse","usePurchaseAssets","provider","sendTransaction","state","setTransactionResponse","setLocked","setBagLocked","setBagExpanded","reset","resetBag","routingData","assetsToBuy","purchasingWithErc20","purchaseResponse","getSigner","bagExpanded"],"sources":["/home/diep/freelance/interface/src/nft/hooks/usePurchaseAssets.ts"],"sourcesContent":["import { useWeb3React } from '@web3-react/core'\nimport { RouteResponse, UpdatedGenieAsset } from 'nft/types'\nimport { useCallback } from 'react'\nimport shallow from 'zustand/shallow'\n\nimport { useBag } from './useBag'\nimport { useSendTransaction } from './useSendTransaction'\nimport { useTransactionResponse } from './useTransactionResponse'\n\nexport function usePurchaseAssets(): (\n  routingData: RouteResponse,\n  assetsToBuy: UpdatedGenieAsset[],\n  purchasingWithErc20?: boolean\n) => Promise<void> {\n  const { provider } = useWeb3React()\n  const sendTransaction = useSendTransaction((state) => state.sendTransaction)\n  const setTransactionResponse = useTransactionResponse((state) => state.setTransactionResponse)\n\n  const {\n    setLocked: setBagLocked,\n    setBagExpanded,\n    reset: resetBag,\n  } = useBag(\n    ({ setLocked, setBagExpanded, reset }) => ({\n      setLocked,\n      setBagExpanded,\n      reset,\n    }),\n    shallow\n  )\n\n  return useCallback(\n    async (routingData: RouteResponse, assetsToBuy: UpdatedGenieAsset[], purchasingWithErc20 = false) => {\n      if (!provider) return\n\n      const purchaseResponse = await sendTransaction(\n        provider.getSigner(),\n        assetsToBuy,\n        routingData,\n        purchasingWithErc20\n      )\n\n      if (purchaseResponse) {\n        setBagLocked(false)\n        setTransactionResponse(purchaseResponse)\n        setBagExpanded({ bagExpanded: false })\n        resetBag()\n      }\n    },\n    [provider, resetBag, sendTransaction, setBagExpanded, setBagLocked, setTransactionResponse]\n  )\n}\n"],"mappings":";AAAA,SAASA,YAAY,QAAQ,kBAAkB;AAE/C,SAASC,WAAW,QAAQ,OAAO;AACnC,OAAOC,OAAO,MAAM,iBAAiB;AAErC,SAASC,MAAM,QAAQ,UAAU;AACjC,SAASC,kBAAkB,QAAQ,sBAAsB;AACzD,SAASC,sBAAsB,QAAQ,0BAA0B;AAEjE,OAAO,SAASC,iBAAiB,GAId;EAAA;EACjB,MAAM;IAAEC;EAAS,CAAC,GAAGP,YAAY,EAAE;EACnC,MAAMQ,eAAe,GAAGJ,kBAAkB,CAAEK,KAAK,IAAKA,KAAK,CAACD,eAAe,CAAC;EAC5E,MAAME,sBAAsB,GAAGL,sBAAsB,CAAEI,KAAK,IAAKA,KAAK,CAACC,sBAAsB,CAAC;EAE9F,MAAM;IACJC,SAAS,EAAEC,YAAY;IACvBC,cAAc;IACdC,KAAK,EAAEC;EACT,CAAC,GAAGZ,MAAM,CACR;IAAA,IAAC;MAAEQ,SAAS;MAAEE,cAAc;MAAEC;IAAM,CAAC;IAAA,OAAM;MACzCH,SAAS;MACTE,cAAc;MACdC;IACF,CAAC;EAAA,CAAC,EACFZ,OAAO,CACR;EAED,OAAOD,WAAW,CAChB,gBAAOe,WAA0B,EAAEC,WAAgC,EAAkC;IAAA,IAAhCC,mBAAmB,uEAAG,KAAK;IAC9F,IAAI,CAACX,QAAQ,EAAE;IAEf,MAAMY,gBAAgB,GAAG,MAAMX,eAAe,CAC5CD,QAAQ,CAACa,SAAS,EAAE,EACpBH,WAAW,EACXD,WAAW,EACXE,mBAAmB,CACpB;IAED,IAAIC,gBAAgB,EAAE;MACpBP,YAAY,CAAC,KAAK,CAAC;MACnBF,sBAAsB,CAACS,gBAAgB,CAAC;MACxCN,cAAc,CAAC;QAAEQ,WAAW,EAAE;MAAM,CAAC,CAAC;MACtCN,QAAQ,EAAE;IACZ;EACF,CAAC,EACD,CAACR,QAAQ,EAAEQ,QAAQ,EAAEP,eAAe,EAAEK,cAAc,EAAED,YAAY,EAAEF,sBAAsB,CAAC,CAC5F;AACH;AAAC,GA1CeJ,iBAAiB;EAAA,QAKVN,YAAY,EACTI,kBAAkB,EACXC,sBAAsB,EAMjDF,MAAM;AAAA"},"metadata":{},"sourceType":"module"}